(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t,e="GET"){return new Promise(((r,n)=>{const s=new XMLHttpRequest;s.open(e,t),s.onload=()=>{"200"==s.status?r(s.response):n(s.status+" "+s.statusText)},s.onerror=()=>{n(s.status+" "+s.statusText)},s.send()}))}t.d({},{G:()=>e}),new class{key="61b15b0c0f1865015720e4bc6c0b7d55";urlWeatherCurrent=`https://api.openweathermap.org/data/2.5/weather?q=Minsk&appid=${this.key}`;widgetHeaderElement=document.querySelector(".widget-header");constructor(){this.init()}init(){this.createHeader(),this.transformDate(),this.getDirection()}widgetHeaderTemplate(t){const{city:e,windDirection:r,windSpeed:n,date:s,temp:i,countryCode:a,description:o,iconSrc:d}=t,c=Math.round(i)>0?"+"+Math.round(i):Math.round(i);return`\n\t<div class="widget-top">\n\t\t<div class="widget-geo">${e}, ${a}</div>\n\t\t<div class="widget-time"> \n\t\t\t<div class="time-icon"><img src="../icons/clock-regular.svg" alt=""></div>\n\t\t\t<p>${this.transformDate(s.getHours())}:${this.transformDate(s.getMinutes())}</p>\n\t\t</div>\n\t</div>\n\t<div class="widget-center">\n\t\t<img src="${d}" alt="">\n\t\t<h2>${c}</h2>\n\t\t<div class="widget-descr">${o}</div>\n\t</div>\n\t<div class="widget-wind">\n\t\t<div>${r}</div>\n\t\t<div>${n} м/с</div>\n\t</div>\n\t`}transformDate(t){return t<10?`0${t}`:t}renderHeader(t){this.widgetHeaderElement.innerHTML+=this.widgetHeaderTemplate(t)}getDirection(t){switch(console.log(t),!0){case t>337.5||t<22.5:return"Север";case t>22.5&&t<67.5:return"Северо-восток";case t>67.5&&t<112.5:return"Восток";case t>112.5&&t<157.5:return"Юго-восток";case t>157.5&&t<202.5:return"Юг";case t>202.5&&t<247.5:return"Юго-запад";case t>247.5&&t<292.5:return"Запад";case t>292.5&&t<337.5:return"Северо-запад"}}createHeader(){e(this.urlWeatherCurrent).then((t=>{const e=JSON.parse(t);console.log(e);const r=e.name,n=this.getDirection(e.wind.deg),s=e.wind.speed,i=new Date(1e3*e.dt),a=e.main.temp-273.15,o=e.sys.country,d=e.weather[0].description,c=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`;this.renderHeader({city:r,windDirection:n,windSpeed:s,date:i,temp:a,countryCode:o,description:d,iconSrc:c})}))}},new class{key="61b15b0c0f1865015720e4bc6c0b7d55";urlWeatherByDays=`https://api.openweathermap.org/data/2.5/forecast?q=Minsk&appid=${this.key}`;widgetBodyElement=document.querySelector(".widget-body");constructor(){this.init()}init(){this.createBody(),this.transformMonth(),this.transformDate()}widgetBodyTemplate(t){const{date:e,iconSrc:r,temp:n}=t;return console.log(e),`\n\t\t<div class="widget-item">\n\t\t\t<div class="item-text">${e.getDate()} ${this.transformMonth(e.getMonth())} \n\t\t\t${this.transformDate(e.getHours())}:${this.transformDate(e.getMinutes())}</div>\n\t\t\t<img class="item-image"src="${r}" alt="">\n\t\t\t<div class="item-text">${n}°C</div>\n\t\t</div>\n\t`}transformMonth(t){switch(t){case t=0:return"Января";case t=1:return"Февраля";case t=2:return"Марта";case t=3:return"Апреля";case t=4:return"Мая";case t=5:return"Июня";case t=6:return"Июля";case t=7:return"Августа";case t=8:return"Сентября";case t=9:return"Октября";case t=10:return"Ноября";case t=11:return"Декабря"}}transformDate(t){return t<10?`0${t}`:t}renderBody(t){this.widgetBodyElement.innerHTML+=this.widgetBodyTemplate(t)}createBody(){e(this.urlWeatherByDays).then((t=>{JSON.parse(t).list.forEach(((t,e)=>{const r=new Date(1e3*t.dt),n=`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,s=Math.round(t.main.temp-273.15);e%8==0&&(console.log(t),this.renderBody({date:r,iconSrc:n,temp:s}))}))}))}}})();